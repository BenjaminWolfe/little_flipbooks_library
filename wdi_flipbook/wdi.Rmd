---
title: "a WDI mini flipbook"
subtitle: "âš”<br/>made with xaringan"
author: "Gina Reynolds"
date: "2019/03/05"
output:
  xaringan::moon_reader:
    chakra: libs/remark-latest.min.js
    lib_dir: libs
    css: ["kunoichi", "ninjutsu"]
    nature:
      ratio: "20:10"
      highlightLines: true
---


# Introduction


The WDI package written by Vincent A-B access the the World Bank API.  





Note:  wbstats

in the programming language R implements the "layered grammar of graphics" --- a proposal of Leland Wilkinson and the product of the dissertation and ongoing work of Hadley Wickham.  This data visualization system idea is at once powerful, novel, and intuitive.  Wickham and collaborators have built a system where data visualization is dividable into parameters:  data to visualize, aesthetics that represent variables, geometric objects, a coordinate system, specific scales, and statistical transformation.  

In this book, I use a "slow ggplotting" method as well as a "flipbook" format to facilitate the introduction of this plotting method. "Slow ggplotting" makes modifications to plots as incrementally as possible so that it is clear to users what code triggers each new layer or modification.  The aim is less to be concise, and more to be explicit about how new statements modify the plot; repetition should facilitating more interactions with ggplotting to help newcomers internalize the functions. The flipbook layout is designed to show what code is triggering each change in the plot output. 

Readers of the book should easily be able to follow along with how plots are built up.  While intuitive, using ggplotting effectively and efficiently nevertheless requires practice.  My hope is that these examples will be a helpful reference point for those that endeavor to pick up data visualization with ggplot2. 


```{r, echo = T}
source("xaringan_reveal.R")
```


---

```{r setup, message=FALSE}
library(tidyverse)
library(WDI)
WDIsearch(string = "food")
```

"SN.ITK.DFCT" is "Depth of the food deficit (kilocalories per person per day)"   

"Application programming interface"

---

```{r make_wdi_data}
WDI(country = "all", indicator = "SN.ITK.DFCT", extra = T) %>%
  rename(food_deficit = SN.ITK.DFCT) %>%
  filter(region != "Aggregates") ->
  wdi_data
```

---

`r apply_reveal("make_wdi_data")`


---

```{r country_subset, echo = FALSE, eval = FALSE}
wdi_data %>%
  filter(country == "Chile" | country == "Argentina") ->
  wdi_argentina_chile
```

---


`r apply_reveal("country_subset")`

---

```{r time_series_plot, echo = FALSE, eval = FALSE}
ggplot(data = wdi_argentina_chile) +
  aes(x = year, y = food_deficit) +
  geom_point() +
  geom_line() +
  aes(col = country) +
  scale_y_continuous(limits = c(0, 30))
 
```

---


`r apply_reveal("time_series_plot")`

---

```{r time_subset, echo = FALSE, eval = FALSE}
wdi_data %>%
  filter(year %in% c(2000, 2005, 2010, 2015)) ->
  wdi_2007
```

---

`r apply_reveal("time_subset")`

<!-- --- -->

<!-- ```{r world_map_data} -->
<!-- map_data("world") %>%  -->
<!--   mutate(iso3c = countrycode::countrycode(region, "country.name", "iso3c")) %>%  -->
<!--   rename(polygon_regions = region) -> -->
<!--   world_map -->
<!-- ``` -->

<!-- --- -->

<!-- `r apply_reveal("world_map_data")` -->

<!-- --- -->


<!-- ```{r joined_data} -->
<!-- full_join(world_map, wdi_2007) ->  -->
<!--   world_map_wdi -->
<!-- ``` -->

<!-- --- -->

<!-- `r apply_reveal("joined_data")` -->

<!-- --- -->


<!-- ```{r plot_maps} -->
<!-- ggplot(world_map_wdi %>% filter(polygon_regions != "Antarctica")) + -->
<!--   aes(x = long, y = lat, group = group, fill = food_deficit) + -->
<!--   geom_polygon() + -->
<!--   coord_equal() + -->
<!--   theme_void() + -->
<!--   scale_fill_viridis_c(option = "magma") -->
<!-- ``` -->

<!-- --- -->

<!-- `r apply_reveal("plot_maps")` -->

