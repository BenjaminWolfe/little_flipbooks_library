<!DOCTYPE html>
<html>
  <head>
    <title>Introduction to the Bootstrap</title>
    <meta charset="utf-8">
    <meta name="author" content="Gina Reynolds, June 2019" />
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to the Bootstrap
### Gina Reynolds, June 2019

---







---

# Introduction

This is a minimal example to demonstrate how to create a flipbook with data from #TidyTuesday.  It walks through data wrangling and plots pipelines made with the Tidyverse.  The functions that make this possible are the work of Emi Tanaka, Garrick Aden-Buie and myself, and are built for Xaringan, an Rmarkdown file type for creating presentation slides; the functions make use of the function `knitr:::knit_code$get()`.

The code to create the flipbook is an .Rmd that you can download [**here**](https://raw.githubusercontent.com/EvaMaeRey/little_flipbooks_library/master/tidytuesday_minimal_example/tidytuesday_minimal_example.Rmd).

---

Interested in more flipbooks? Check out 

- [the ggplot flipbook](https://evamaerey.github.io/ggplot_flipbook/ggplot_flipbook_xaringan.html)
- [The Tidyverse in Action](https://evamaerey.github.io/tidyverse_in_action/tidyverse_in_action.html)




For more about Xaringan:

- [Xaringan presentation slides](https://slides.yihui.name/xaringan/)

The sequential workflow of the Tidyverse makes incremental display of pipelines and ggplot statements ideal:  

- [www.tidyverse.org](https://www.tidyverse.org/)


---

---

# Set up

Okay. Let's load the the `reveal for xaringan` functions for "flipbooking" and the `tidyverse`.


```r
source(file = "https://raw.githubusercontent.com/EvaMaeRey/little_flipbooks_library/master/xaringan_reveal_parenthetical.R")
```

And load the tidyverse.


```r
library(tidyverse)
```

---

&lt;img src="bootstrap_files/figure-html/sample-1.png" width="100%" /&gt;

class: split-40
count: false

.column[.content[

```r
*set.seed(2019)
```
]]
.column[.content.center[

]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
*tibble(x = rnorm(30))
```
]]
.column[.content.center[

```
  # A tibble: 30 x 1
          x
      &lt;dbl&gt;
   1  0.739
   2 -0.515
   3 -1.64 
   4  0.916
   5 -1.27 
   6  0.738
   7 -0.783
   8  0.509
   9 -1.49 
  10 -0.319
  # … with 20 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
* mutate(y = x * .4 + rnorm(30))
```
]]
.column[.content.center[

```
  # A tibble: 30 x 2
          x       y
      &lt;dbl&gt;   &lt;dbl&gt;
   1  0.739 -0.639 
   2 -0.515  0.424 
   3 -1.64   0.105 
   4  0.916 -0.145 
   5 -1.27   0.495 
   6  0.738 -0.0881
   7 -0.783 -0.790 
   8  0.509  0.458 
   9 -1.49  -1.76  
  10 -0.319 -0.566 
  # … with 20 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
* mutate(id = 1:n())
```
]]
.column[.content.center[

```
  # A tibble: 30 x 3
          x       y    id
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
   1  0.739 -0.639      1
   2 -0.515  0.424      2
   3 -1.64   0.105      3
   4  0.916 -0.145      4
   5 -1.27   0.495      5
   6  0.738 -0.0881     6
   7 -0.783 -0.790      7
   8  0.509  0.458      8
   9 -1.49  -1.76       9
  10 -0.319 -0.566     10
  # … with 20 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
*my_data
```
]]
.column[.content.center[

]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
my_data
*ggplot(data = my_data)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_sample_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
my_data
ggplot(data = my_data) +
* aes(x = x)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_sample_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
my_data
ggplot(data = my_data) +
  aes(x = x) +
* aes(y = y)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_sample_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
my_data
ggplot(data = my_data) +
  aes(x = x) +
  aes(y = y) +
* geom_point()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_sample_9-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
set.seed(2019)
tibble(x = rnorm(30)) %&gt;% 
  mutate(y = x * .4 + rnorm(30)) %&gt;% 
  mutate(id = 1:n()) -&gt;
my_data
ggplot(data = my_data) +
  aes(x = x) +
  aes(y = y) +
  geom_point() +
* geom_smooth(method = lm, se = F)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_sample_10-1.png" width="100%" /&gt;
]]

---




class: split-40
count: false

.column[.content[

```r
*my_data
```
]]
.column[.content.center[

```
  # A tibble: 30 x 3
          x       y    id
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
   1  0.739 -0.639      1
   2 -0.515  0.424      2
   3 -1.64   0.105      3
   4  0.916 -0.145      4
   5 -1.27   0.495      5
   6  0.738 -0.0881     6
   7 -0.783 -0.790      7
   8  0.509  0.458      8
   9 -1.49  -1.76       9
  10 -0.319 -0.566     10
  # … with 20 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
* crossing(boot_sample_id = 1:100)
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 4
         x      y    id boot_sample_id
     &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;
   1 0.739 -0.639     1              1
   2 0.739 -0.639     1              2
   3 0.739 -0.639     1              3
   4 0.739 -0.639     1              4
   5 0.739 -0.639     1              5
   6 0.739 -0.639     1              6
   7 0.739 -0.639     1              7
   8 0.739 -0.639     1              8
   9 0.739 -0.639     1              9
  10 0.739 -0.639     1             10
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
  crossing(boot_sample_id = 1:100) %&gt;% 
* group_by(boot_sample_id)
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 4
  # Groups:   boot_sample_id [100]
         x      y    id boot_sample_id
     &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;
   1 0.739 -0.639     1              1
   2 0.739 -0.639     1              2
   3 0.739 -0.639     1              3
   4 0.739 -0.639     1              4
   5 0.739 -0.639     1              5
   6 0.739 -0.639     1              6
   7 0.739 -0.639     1              7
   8 0.739 -0.639     1              8
   9 0.739 -0.639     1              9
  10 0.739 -0.639     1             10
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
  crossing(boot_sample_id = 1:100) %&gt;% 
  group_by(boot_sample_id) %&gt;% 
* sample_frac(size = 1,
*             replace = TRUE)
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 4
  # Groups:   boot_sample_id [100]
          x      y    id boot_sample_id
      &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;
   1  0.316  0.767    15              1
   2 -0.238 -1.82     11              1
   3  0.316  0.767    15              1
   4  2.64   1.08     29              1
   5  0.878  1.21     17              1
   6 -2.26  -1.23     20              1
   7  0.739 -0.639     1              1
   8 -1.12  -0.355    13              1
   9 -0.515  0.424     2              1
  10  0.371  0.354    16              1
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
  crossing(boot_sample_id = 1:100) %&gt;% 
  group_by(boot_sample_id) %&gt;% 
  sample_frac(size = 1, 
              replace = TRUE) %&gt;% 
* group_by(id, boot_sample_id)
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 4
  # Groups:   id, boot_sample_id [1,883]
           x      y    id boot_sample_id
       &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;
   1 -1.62    0.173    30              1
   2 -0.512  -0.733    26              1
   3 -2.26   -1.23     20              1
   4 -0.515   0.424     2              1
   5  0.0406  0.966    28              1
   6 -1.62    0.173    30              1
   7  0.234   0.167    14              1
   8  0.968   0.151    22              1
   9  0.509   0.458     8              1
  10  0.739  -0.639     1              1
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
  crossing(boot_sample_id = 1:100) %&gt;% 
  group_by(boot_sample_id) %&gt;% 
  sample_frac(size = 1, 
              replace = TRUE) %&gt;% 
  group_by(id, boot_sample_id) %&gt;%
* mutate(times_sampled = n())
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 5
  # Groups:   id, boot_sample_id [1,915]
          x      y    id boot_sample_id times_sampled
      &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
   1 -0.512 -0.733    26              1             3
   2  0.234  0.167    14              1             1
   3  0.371  0.354    16              1             1
   4 -1.77  -0.568    18              1             2
   5 -1.64   0.105     3              1             1
   6 -1.80  -1.51     27              1             1
   7  2.64   1.08     29              1             2
   8  1.62   2.37     12              1             1
   9  0.968  0.151    22              1             2
  10 -0.512 -0.733    26              1             3
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
my_data %&gt;% 
  crossing(boot_sample_id = 1:100) %&gt;% 
  group_by(boot_sample_id) %&gt;% 
  sample_frac(size = 1, 
              replace = TRUE) %&gt;% 
  group_by(id, boot_sample_id) %&gt;%
  mutate(times_sampled = n()) -&gt;
*boot_samples
```
]]
.column[.content.center[

]]

---

# Ensemble plot



&lt;img src="bootstrap_files/figure-html/plotboot-1.png" width="100%" /&gt;

---

class: split-40
count: false

.column[.content[

```r
*boot_samples
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 5
  # Groups:   id, boot_sample_id [1,931]
          x       y    id boot_sample_id times_sampled
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
   1 -1.27   0.495      5              1             2
   2 -1.62   0.173     30              1             2
   3 -0.783 -0.790      7              1             4
   4 -1.64   0.105      3              1             1
   5  0.286  0.0613    21              1             3
   6 -1.80  -1.51      27              1             2
   7  2.64   1.08      29              1             1
   8 -1.80  -1.51      27              1             2
   9 -0.783 -0.790      7              1             4
  10  0.738 -0.0881     6              1             1
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
* filter(boot_sample_id &lt;= 12)
```
]]
.column[.content.center[

```
  # A tibble: 360 x 5
  # Groups:   id, boot_sample_id [229]
          x       y    id boot_sample_id times_sampled
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
   1 -1.27   0.495      5              1             2
   2 -1.62   0.173     30              1             2
   3 -0.783 -0.790      7              1             4
   4 -1.64   0.105      3              1             1
   5  0.286  0.0613    21              1             3
   6 -1.80  -1.51      27              1             2
   7  2.64   1.08      29              1             1
   8 -1.80  -1.51      27              1             2
   9 -0.783 -0.790      7              1             4
  10  0.738 -0.0881     6              1             1
  # … with 350 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
* ggplot()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_3-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
* aes(x = x)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_4-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
* aes(y = y)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
* geom_point(size = 3, col = "magenta")
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
* facet_wrap(~ paste("boot sample", boot_sample_id))
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
* aes(label = paste0(times_sampled, "X"))
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
* geom_text(size = 2, col = "grey", aes(alpha = NULL))
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_9-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
  geom_text(size = 2, col = "grey", aes(alpha = NULL)) +
* aes(group = boot_sample_id)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_10-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
  geom_text(size = 2, col = "grey", aes(alpha = NULL)) +
  aes(group = boot_sample_id) +
* aes(alpha = times_sampled)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_11-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
  geom_text(size = 2, col = "grey", aes(alpha = NULL)) +
  aes(group = boot_sample_id) +
  aes(alpha = times_sampled) +
* geom_smooth(method = lm, se = F)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_12-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
  geom_text(size = 2, col = "grey", aes(alpha = NULL)) +
  aes(group = boot_sample_id) +
  aes(alpha = times_sampled) +
  geom_smooth(method = lm, se = F) +
* ggdark::dark_mode()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_13-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;% 
  filter(boot_sample_id &lt;= 12) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = y) +
  geom_point(size = 3, col = "magenta") +
  facet_wrap(~ paste("boot sample", boot_sample_id)) +
  aes(label = paste0(times_sampled, "X")) +
  geom_text(size = 2, col = "grey", aes(alpha = NULL)) +
  aes(group = boot_sample_id) +
  aes(alpha = times_sampled) +
  geom_smooth(method = lm, se = F) +
  ggdark::dark_mode() +
* theme(legend.position = "none")
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_plotboot_14-1.png" width="100%" /&gt;
]]

---


```r
boot_model &lt;- function(df){
  lm(y ~ x, data = df)
}
```




---

class: split-40
count: false

.column[.content[

```r
*boot_samples
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 5
  # Groups:   id, boot_sample_id [1,931]
          x       y    id boot_sample_id times_sampled
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
   1 -1.27   0.495      5              1             2
   2 -1.62   0.173     30              1             2
   3 -0.783 -0.790      7              1             4
   4 -1.64   0.105      3              1             1
   5  0.286  0.0613    21              1             3
   6 -1.80  -1.51      27              1             2
   7  2.64   1.08      29              1             1
   8 -1.80  -1.51      27              1             2
   9 -0.783 -0.790      7              1             4
  10  0.738 -0.0881     6              1             1
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;%
* group_by(boot_sample_id)
```
]]
.column[.content.center[

```
  # A tibble: 3,000 x 5
  # Groups:   boot_sample_id [100]
          x       y    id boot_sample_id times_sampled
      &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;         &lt;int&gt;
   1 -1.27   0.495      5              1             2
   2 -1.62   0.173     30              1             2
   3 -0.783 -0.790      7              1             4
   4 -1.64   0.105      3              1             1
   5  0.286  0.0613    21              1             3
   6 -1.80  -1.51      27              1             2
   7  2.64   1.08      29              1             1
   8 -1.80  -1.51      27              1             2
   9 -0.783 -0.790      7              1             4
  10  0.738 -0.0881     6              1             1
  # … with 2,990 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;%
  group_by(boot_sample_id) %&gt;% 
* nest()
```
]]
.column[.content.center[

```
  # A tibble: 100 x 2
     boot_sample_id data             
              &lt;int&gt; &lt;list&gt;           
   1              1 &lt;tibble [30 × 4]&gt;
   2              2 &lt;tibble [30 × 4]&gt;
   3              3 &lt;tibble [30 × 4]&gt;
   4              4 &lt;tibble [30 × 4]&gt;
   5              5 &lt;tibble [30 × 4]&gt;
   6              6 &lt;tibble [30 × 4]&gt;
   7              7 &lt;tibble [30 × 4]&gt;
   8              8 &lt;tibble [30 × 4]&gt;
   9              9 &lt;tibble [30 × 4]&gt;
  10             10 &lt;tibble [30 × 4]&gt;
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;%
  group_by(boot_sample_id) %&gt;% 
  nest() %&gt;% 
* mutate(model = map(data, boot_model)) # model results are summarised in tidy dataframes using broom
```
]]
.column[.content.center[

```
  # A tibble: 100 x 3
     boot_sample_id data              model 
              &lt;int&gt; &lt;list&gt;            &lt;list&gt;
   1              1 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   2              2 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   3              3 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   4              4 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   5              5 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   6              6 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   7              7 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   8              8 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
   9              9 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
  10             10 &lt;tibble [30 × 4]&gt; &lt;lm&gt;  
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples %&gt;%
  group_by(boot_sample_id) %&gt;% 
  nest() %&gt;% 
  mutate(model = map(data, boot_model)) %&gt;%   # model results are summarised in tidy dataframes using broom
* mutate(glance  = map(model, broom::glance),
*        augment = map(model, broom::augment),
*        tidy    = map(model, broom::tidy)) -&gt;
*boot_samples_models
```
]]
.column[.content.center[

]]

---

# Slope coefficient confidence interval


&lt;img src="bootstrap_files/figure-html/confint-1.png" width="100%" /&gt;

---

class: split-40
count: false

.column[.content[

```r
*boot_samples_models
```
]]
.column[.content.center[

```
  # A tibble: 100 x 6
     boot_sample_id data         model  glance        augment      tidy      
              &lt;int&gt; &lt;list&gt;       &lt;list&gt; &lt;list&gt;        &lt;list&gt;       &lt;list&gt;    
   1              1 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   2              2 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   3              3 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   4              4 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   5              5 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   6              6 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   7              7 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   8              8 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   9              9 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
  10             10 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
* unnest(tidy)
```
]]
.column[.content.center[

```
  # A tibble: 200 x 6
     boot_sample_id term        estimate std.error statistic     p.value
              &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
   1              1 (Intercept)   0.0718     0.162     0.442 0.662      
   2              1 x             0.541      0.137     3.94  0.000490   
   3              2 (Intercept)   0.192      0.147     1.30  0.203      
   4              2 x             0.778      0.140     5.56  0.00000608 
   5              3 (Intercept)   0.0225     0.112     0.201 0.843      
   6              3 x             0.661      0.100     6.59  0.000000379
   7              4 (Intercept)  -0.0945     0.136    -0.695 0.493      
   8              4 x             0.407      0.136     3.00  0.00560    
   9              5 (Intercept)  -0.0695     0.153    -0.453 0.654      
  10              5 x             0.495      0.130     3.82  0.000679   
  # … with 190 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
* filter(term == "x")
```
]]
.column[.content.center[

```
  # A tibble: 100 x 6
     boot_sample_id term  estimate std.error statistic     p.value
              &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
   1              1 x        0.541     0.137      3.94 0.000490   
   2              2 x        0.778     0.140      5.56 0.00000608 
   3              3 x        0.661     0.100      6.59 0.000000379
   4              4 x        0.407     0.136      3.00 0.00560    
   5              5 x        0.495     0.130      3.82 0.000679   
   6              6 x        0.445     0.108      4.13 0.000292   
   7              7 x        0.423     0.111      3.80 0.000709   
   8              8 x        0.400     0.111      3.59 0.00125    
   9              9 x        0.626     0.148      4.24 0.000218   
  10             10 x        0.536     0.142      3.76 0.000788   
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  filter(term == "x") -&gt;
*x_estimates
*ggplot(data = x_estimates)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confint_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  filter(term == "x") -&gt;
x_estimates  
ggplot(data = x_estimates) +
* aes(x = estimate)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confint_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  filter(term == "x") -&gt;
x_estimates  
ggplot(data = x_estimates) +
  aes(x = estimate) +
* geom_histogram()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confint_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  filter(term == "x") -&gt;
x_estimates  
ggplot(data = x_estimates) +
  aes(x = estimate) +
  geom_histogram() +
* geom_rug()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confint_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  filter(term == "x") -&gt;
x_estimates  
ggplot(data = x_estimates) +
  aes(x = estimate) +
  geom_histogram() +
  geom_rug() +
* geom_vline(xintercept =
*              quantile(x_estimates$estimate,
*                       probs = c(.05, .95)),
*            col = "red",
*            linetype = "dashed")
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confint_13-1.png" width="100%" /&gt;
]]

---

&lt;img src="bootstrap_files/figure-html/confintplus-1.png" width="100%" /&gt;


class: split-40
count: false

.column[.content[

```r
*boot_samples_models
```
]]
.column[.content.center[

```
  # A tibble: 100 x 6
     boot_sample_id data         model  glance        augment      tidy      
              &lt;int&gt; &lt;list&gt;       &lt;list&gt; &lt;list&gt;        &lt;list&gt;       &lt;list&gt;    
   1              1 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   2              2 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   3              3 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   4              4 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   5              5 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   6              6 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   7              7 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   8              8 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
   9              9 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
  10             10 &lt;tibble [30… &lt;lm&gt;   &lt;df[,11] [1 … &lt;df[,9] [30… &lt;df[,5] […
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
* unnest(tidy)
```
]]
.column[.content.center[

```
  # A tibble: 200 x 6
     boot_sample_id term        estimate std.error statistic     p.value
              &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
   1              1 (Intercept)   0.0718     0.162     0.442 0.662      
   2              1 x             0.541      0.137     3.94  0.000490   
   3              2 (Intercept)   0.192      0.147     1.30  0.203      
   4              2 x             0.778      0.140     5.56  0.00000608 
   5              3 (Intercept)   0.0225     0.112     0.201 0.843      
   6              3 x             0.661      0.100     6.59  0.000000379
   7              4 (Intercept)  -0.0945     0.136    -0.695 0.493      
   8              4 x             0.407      0.136     3.00  0.00560    
   9              5 (Intercept)  -0.0695     0.153    -0.453 0.654      
  10              5 x             0.495      0.130     3.82  0.000679   
  # … with 190 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
* select(boot_sample_id, estimate, term)
```
]]
.column[.content.center[

```
  # A tibble: 200 x 3
     boot_sample_id estimate term       
              &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;      
   1              1   0.0718 (Intercept)
   2              1   0.541  x          
   3              2   0.192  (Intercept)
   4              2   0.778  x          
   5              3   0.0225 (Intercept)
   6              3   0.661  x          
   7              4  -0.0945 (Intercept)
   8              4   0.407  x          
   9              5  -0.0695 (Intercept)
  10              5   0.495  x          
  # … with 190 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
* spread(key = term, value = estimate)
```
]]
.column[.content.center[

```
  # A tibble: 100 x 3
     boot_sample_id `(Intercept)`     x
              &lt;int&gt;         &lt;dbl&gt; &lt;dbl&gt;
   1              1        0.0718 0.541
   2              2        0.192  0.778
   3              3        0.0225 0.661
   4              4       -0.0945 0.407
   5              5       -0.0695 0.495
   6              6        0.0425 0.445
   7              7        0.0987 0.423
   8              8       -0.0692 0.400
   9              9       -0.178  0.626
  10             10       -0.112  0.536
  # … with 90 more rows
```
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
  spread(key = term, value = estimate) %&gt;% 
* ggplot()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confintplus_5-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
  spread(key = term, value = estimate) %&gt;% 
  ggplot() +
* aes(x = x)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confintplus_6-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
  spread(key = term, value = estimate) %&gt;% 
  ggplot() +
  aes(x = x) +
* aes(y = `(Intercept)`)
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confintplus_7-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
  spread(key = term, value = estimate) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = `(Intercept)`) +
* geom_point()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confintplus_8-1.png" width="100%" /&gt;
]]
---
class: split-40
count: false

.column[.content[

```r
boot_samples_models %&gt;% 
  unnest(tidy) %&gt;% 
  select(boot_sample_id, estimate, term) %&gt;% 
  spread(key = term, value = estimate) %&gt;% 
  ggplot() +
  aes(x = x) +
  aes(y = `(Intercept)`) +
  geom_point() +
* geom_density_2d()
```
]]
.column[.content.center[
&lt;img src="bootstrap_files/figure-html/output_confintplus_9-1.png" width="100%" /&gt;
]]

---


&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 80%}
&lt;/style&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
